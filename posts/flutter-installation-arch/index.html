<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Installing Flutter and Android SKD on Arch Linux without Android Studio | GBergatto</title><meta name=keywords content="Flutter"><meta name=description content="Having recently switched from Arcolinux to Arch Linux, I needed to reinstall Flutter on my laptop. The last time I did this, I installed Android Studio because it seemed like the easiest way to get the Android SDK working. However, I never used it as an IDE, so it was hard to justify keeping it on my system since it takes up more than 30GB.
This time, with a year of Linux experience under my belt, I&rsquo;ve managed to install and configure everything needed to build apps for Android without having to install Android Studio."><meta name=author content><link rel=canonical href=http://gbergatto.github.io/posts/flutter-installation-arch/><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://gbergatto.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://gbergatto.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://gbergatto.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://gbergatto.github.io/apple-touch-icon.png><link rel=mask-icon href=http://gbergatto.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Installing Flutter and Android SKD on Arch Linux without Android Studio"><meta property="og:description" content="Having recently switched from Arcolinux to Arch Linux, I needed to reinstall Flutter on my laptop. The last time I did this, I installed Android Studio because it seemed like the easiest way to get the Android SDK working. However, I never used it as an IDE, so it was hard to justify keeping it on my system since it takes up more than 30GB.
This time, with a year of Linux experience under my belt, I&rsquo;ve managed to install and configure everything needed to build apps for Android without having to install Android Studio."><meta property="og:type" content="article"><meta property="og:url" content="http://gbergatto.github.io/posts/flutter-installation-arch/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-30T18:33:05+02:00"><meta property="article:modified_time" content="2023-05-30T18:33:05+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Installing Flutter and Android SKD on Arch Linux without Android Studio"><meta name=twitter:description content="Having recently switched from Arcolinux to Arch Linux, I needed to reinstall Flutter on my laptop. The last time I did this, I installed Android Studio because it seemed like the easiest way to get the Android SDK working. However, I never used it as an IDE, so it was hard to justify keeping it on my system since it takes up more than 30GB.
This time, with a year of Linux experience under my belt, I&rsquo;ve managed to install and configure everything needed to build apps for Android without having to install Android Studio."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://gbergatto.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Installing Flutter and Android SKD on Arch Linux without Android Studio","item":"http://gbergatto.github.io/posts/flutter-installation-arch/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Installing Flutter and Android SKD on Arch Linux without Android Studio","name":"Installing Flutter and Android SKD on Arch Linux without Android Studio","description":"Having recently switched from Arcolinux to Arch Linux, I needed to reinstall Flutter on my laptop. The last time I did this, I installed Android Studio because it seemed like the easiest way to get the Android SDK working. However, I never used it as an IDE, so it was hard to justify keeping it on my system since it takes up more than 30GB.\nThis time, with a year of Linux experience under my belt, I\u0026rsquo;ve managed to install and configure everything needed to build apps for Android without having to install Android Studio.","keywords":["Flutter"],"articleBody":"Having recently switched from Arcolinux to Arch Linux, I needed to reinstall Flutter on my laptop. The last time I did this, I installed Android Studio because it seemed like the easiest way to get the Android SDK working. However, I never used it as an IDE, so it was hard to justify keeping it on my system since it takes up more than 30GB.\nThis time, with a year of Linux experience under my belt, I’ve managed to install and configure everything needed to build apps for Android without having to install Android Studio. In this article, I’ll tell you how I did it.\nThe first step is to install dart from the “extra” repository and flutter from the AUR. Flutter depends on the Java JDK, so you have to choose which version to install. At first I went with the default option (jdk19), but then I ran into compatibility issues and had to switch to jdk11-openjdk. Later versions are not yet supported by the version of the gradle plugin that Flutter uses to build Android apps.\nWhen the installation was over, I tried to run flutter doctor, but got this error\nfatal: detected dubious ownership in repository at '/opt/flutter' To add an exception for this directory, call: git config --global --add safe.directory /opt/flutter I ran the recommended command to mark the /opt/flutter directory as a safe git repository. Then, I tried again and got the following message\nFlutter failed to create a directory at \"/opt/flutter/bin/cache/downloads\". Please ensure that the SDK and/or project is installed in a location that has read/write permissions for the current user. To fix this, I added my user to the flutterusers group (created automatically during installation) to have read and write access to the Flutter SDK. This was recommended in the message I got at the end of the Flutter installation.\nsudo gpasswd -a $USER flutterusers newgrp flutterusers The newgrp command lets you login your terminal in to the newly added group.\nFinally, I managed to run flutter doctor and got this output\nDoctor summary (to see all details, run flutter doctor -v): [!] Flutter (Channel stable, 3.10.0, on Arch Linux 6.3.3-arch1-1, locale C.UTF-8) ! Warning: `dart` on your path resolves to /opt/dart-sdk/bin/dart, which is not inside your current Flutter SDK checkout at /opt/flutter. Consider adding /opt/flutter/bin to the front of your path. [✗] Android toolchain - develop for Android devices ✗ Unable to locate Android SDK. Install Android Studio from: https://developer.android.com/studio/index.html On first launch it will assist you in installing the Android SDK components. (or visit https://flutter.dev/docs/get-started/install/linux#android-setup for detailed instructions). If the Android SDK has been installed to a custom location, please use `flutter config --android-sdk` to update to that location. [✗] Chrome - develop for the web (Cannot find Chrome executable at google-chrome) ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable. [✗] Linux toolchain - develop for Linux desktop ✗ CMake is required for Linux development. It is likely available from your distribution (e.g.: apt install cmake), or can be downloaded from https://cmake.org/download/ ✗ ninja is required for Linux development. It is likely available from your distribution (e.g.: apt install ninja-build), or can be downloaded from https://github.com/ninja-build/ninja/releases [!] Android Studio (not installed) [✓] Connected device (1 available) [✓] HTTP Host Availability ! Doctor found issues in 5 categories. To develop for Android, only the warning and the Android toolchain issue need to be addressed, the other can be ignored.\nDart not inside your current Flutter SDK The warning is pretty self-explanatory\n! Warning: `dart` on your path resolves to /opt/dart-sdk/bin/dart, which is not inside your current Flutter SDK at /opt/flutter. Consider adding /opt/flutter/bin to the front of your path. To fix this, you simply need to add /opt/flutter/bin to the front of your PATH. You can do this by adding the following line to the shell configuration file of your choice (eg. .bashrc, .zshrc). Personally, I export all environment variables from .zshenv.\nexport PATH=/opt/flutter/bin:$PATH Install the Android toolchain To have access to the Andoid toolchain in its most minimal form, install the following packages from the AUR:\nandroid-sdk: Google Android SDK android-sdk-cmdline-tools-latest: Android SDK Command-line Tools android-sdk-platform-tools: Platform-Tools for Google Android SDK (adb and fastboot) android-sdk-build-tools: Build-Tools for Google Android SDK (aapt, aidl, dexdump, dx, llvm-rs-cc) Command line tools are located in /opt/android-sdk/cmdline-tools/latest/bin, so you can add this folder to your PATH to access them from anywhere. Otherwise, you’ll need to use the full path to each tool.\nTo setup the Android SDK, export the following environment variables like you did for the PATH.\nexport ANDROID_HOME=/opt/android-sdk export JAVA_HOME='/usr/lib/jvm/java-10-openjdk' Then, create an android-sdk group, give it access to the folder where the SDK is stored and add add your user to it.\nsudo groupadd android-sdk sudo setfacl -R -m g:android-sdk:rwx /opt/android-sdk sudo setfacl -d -m g:android-sdk:rwX /opt/android-sdk sudo gpasswd -a $USER android-sdk If flutter doctor still complains about not being able to find the Android SKD try running\nflutter config --android-sdk $ANDROID_SDK_ROOT Before you can build an Android app, you need to install a platform using sdkmanager.\nsdkmanager --install \"platforms;android-33\" sdkmanager --list Finally, accept all licenses with the following command.\nflutter doctor --android-licenses Personally, I run my apps on a physical device connected to my laptop in debug mode, instead of using an emulator. However, if you want to install an emulator, you can do so with avdmanager. You can read more about it in the official documentation.\nIf you’ve followed along with all the steps, you should now be able to build Flutter apps for Android.\nTips for throubleshooting If you encounter any problems during the installation process, I recommend running flutter doctor in verbose mode by adding the -v flag. This will give you additional information about each issue and probably some instructions on how to fix it.\nAlso, when in doubt, try rebooting to make sure the new permissions have taken effect.\n","wordCount":"975","inLanguage":"en","datePublished":"2023-05-30T18:33:05+02:00","dateModified":"2023-05-30T18:33:05+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://gbergatto.github.io/posts/flutter-installation-arch/"},"publisher":{"@type":"Organization","name":"GBergatto","logo":{"@type":"ImageObject","url":"http://gbergatto.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://gbergatto.github.io/ accesskey=h title="GBergatto (Alt + H)">GBergatto</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://gbergatto.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://gbergatto.github.io/about/ title="About Me"><span>About Me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Installing Flutter and Android SKD on Arch Linux without Android Studio</h1><div class=post-meta><span title='2023-05-30 18:33:05 +0200 +0200'>May 30, 2023</span></div></header><div class=post-content><p>Having recently switched from Arcolinux to Arch Linux, I needed to reinstall Flutter on my laptop. The last time I did this, I installed Android Studio because it seemed like the easiest way to get the Android SDK working. However, I never used it as an IDE, so it was hard to justify keeping it on my system since it takes up more than 30GB.</p><p>This time, with a year of Linux experience under my belt, I&rsquo;ve managed to install and configure everything needed to build apps for Android without having to install Android Studio. In this article, I&rsquo;ll tell you how I did it.</p><p>The first step is to install <code>dart</code> from the &ldquo;extra&rdquo; repository and <code>flutter</code> from the AUR. Flutter depends on the Java JDK, so you have to choose which version to install. At first I went with the default option (jdk19), but then I ran into compatibility issues and had to switch to <code>jdk11-openjdk</code>. Later versions are not yet <a href=https://docs.gradle.org/current/userguide/compatibility.html#kotlin>supported</a> by the version of the <a href="https://mvnrepository.com/artifact/com.android.tools.build/gradle?repo=google">gradle plugin</a> that Flutter uses to build Android apps.</p><p>When the installation was over, I tried to run <code>flutter doctor</code>, but got this error</p><pre tabindex=0><code>fatal: detected dubious ownership in repository at &#39;/opt/flutter&#39;
To add an exception for this directory, call:
git config --global --add safe.directory /opt/flutter
</code></pre><p>I ran the recommended command to mark the <code>/opt/flutter</code> directory as a safe git repository. Then, I tried again and got the following message</p><pre tabindex=0><code>Flutter failed to create a directory at &#34;/opt/flutter/bin/cache/downloads&#34;.
Please ensure that the SDK and/or project is installed in a location that has read/write permissions for the current user.
</code></pre><p>To fix this, I added my user to the <code>flutterusers</code> group (created automatically during installation) to have read and write access to the Flutter SDK. This was recommended in the message I got at the end of the Flutter installation.</p><pre tabindex=0><code>sudo gpasswd -a $USER flutterusers
newgrp flutterusers
</code></pre><p>The <code>newgrp</code> command lets you login your terminal in to the newly added group.</p><p>Finally, I managed to run <code>flutter doctor</code> and got this output</p><pre tabindex=0><code>Doctor summary (to see all details, run flutter doctor -v):
[!] Flutter (Channel stable, 3.10.0, on Arch Linux 6.3.3-arch1-1, locale C.UTF-8)
	! Warning: `dart` on your path resolves to /opt/dart-sdk/bin/dart, which is not inside your current Flutter SDK checkout at /opt/flutter. Consider adding /opt/flutter/bin to the front of your path.

[✗] Android toolchain - develop for Android devices
    ✗ Unable to locate Android SDK.
      Install Android Studio from: https://developer.android.com/studio/index.html
      On first launch it will assist you in installing the Android SDK components.
      (or visit https://flutter.dev/docs/get-started/install/linux#android-setup for detailed instructions).
      If the Android SDK has been installed to a custom location, please use
      `flutter config --android-sdk` to update to that location.

[✗] Chrome - develop for the web (Cannot find Chrome executable at google-chrome)
    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.
[✗] Linux toolchain - develop for Linux desktop
    ✗ CMake is required for Linux development.
      It is likely available from your distribution (e.g.: apt install cmake), or can be downloaded from https://cmake.org/download/
    ✗ ninja is required for Linux development.
      It is likely available from your distribution (e.g.: apt install ninja-build), or can be downloaded from https://github.com/ninja-build/ninja/releases
[!] Android Studio (not installed)
[✓] Connected device (1 available)
[✓] HTTP Host Availability

! Doctor found issues in 5 categories.
</code></pre><p>To develop for Android, only the warning and the Android toolchain issue need to be addressed, the other can be ignored.</p><h2 id=dart-not-inside-your-current-flutter-sdk>Dart not inside your current Flutter SDK<a hidden class=anchor aria-hidden=true href=#dart-not-inside-your-current-flutter-sdk>#</a></h2><p>The warning is pretty self-explanatory</p><pre tabindex=0><code>! Warning: `dart` on your path resolves to /opt/dart-sdk/bin/dart, which is not inside your current Flutter SDK at /opt/flutter. Consider adding /opt/flutter/bin to the front of your path.
</code></pre><p>To fix this, you simply need to add <code>/opt/flutter/bin</code> to the front of your <code>PATH</code>. You can do this by adding the following line to the shell configuration file of your choice (eg. <code>.bashrc</code>, <code>.zshrc</code>). Personally, I export all environment variables from <code>.zshenv</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export PATH<span style=color:#f92672>=</span>/opt/flutter/bin:$PATH
</span></span></code></pre></div><h2 id=install-the-android-toolchain>Install the Android toolchain<a hidden class=anchor aria-hidden=true href=#install-the-android-toolchain>#</a></h2><p>To have access to the Andoid toolchain in its most minimal form, install the following packages from the AUR:</p><ul><li><code>android-sdk</code>: Google Android SDK</li><li><code>android-sdk-cmdline-tools-latest</code>: Android SDK Command-line Tools</li><li><code>android-sdk-platform-tools</code>: Platform-Tools for Google Android SDK (adb and fastboot)</li><li><code>android-sdk-build-tools</code>: Build-Tools for Google Android SDK (aapt, aidl, dexdump, dx, llvm-rs-cc)</li></ul><p>Command line tools are located in <code>/opt/android-sdk/cmdline-tools/latest/bin</code>, so you can add this folder to your <code>PATH</code> to access them from anywhere. Otherwise, you&rsquo;ll need to use the full path to each tool.</p><p>To setup the Android SDK, export the following environment variables like you did for the <code>PATH</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export ANDROID_HOME<span style=color:#f92672>=</span>/opt/android-sdk
</span></span><span style=display:flex><span>export JAVA_HOME<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/usr/lib/jvm/java-10-openjdk&#39;</span>
</span></span></code></pre></div><p>Then, create an <code>android-sdk</code> group, give it access to the folder where the SDK is stored and add add your user to it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo groupadd android-sdk
</span></span><span style=display:flex><span>sudo setfacl -R -m g:android-sdk:rwx /opt/android-sdk
</span></span><span style=display:flex><span>sudo setfacl -d -m g:android-sdk:rwX /opt/android-sdk
</span></span><span style=display:flex><span>sudo gpasswd -a $USER android-sdk
</span></span></code></pre></div><p>If <code>flutter doctor</code> still complains about not being able to find the Android SKD try running</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>flutter config --android-sdk $ANDROID_SDK_ROOT
</span></span></code></pre></div><p>Before you can build an Android app, you need to install a platform using <code>sdkmanager</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sdkmanager --install <span style=color:#e6db74>&#34;platforms;android-33&#34;</span>
</span></span><span style=display:flex><span>sdkmanager --list
</span></span></code></pre></div><p>Finally, accept all licenses with the following command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>flutter doctor --android-licenses
</span></span></code></pre></div><p>Personally, I run my apps on a physical device connected to my laptop in debug mode, instead of using an emulator. However, if you want to install an emulator, you can do so with <code>avdmanager</code>. You can read more about it in the <a href=https://developer.android.com/tools/avdmanager>official documentation</a>.</p><p>If you&rsquo;ve followed along with all the steps, you should now be able to build Flutter apps for Android.</p><h2 id=tips-for-throubleshooting>Tips for throubleshooting<a hidden class=anchor aria-hidden=true href=#tips-for-throubleshooting>#</a></h2><p>If you encounter any problems during the installation process, I recommend running <code>flutter doctor</code> in verbose mode by adding the <code>-v</code> flag. This will give you additional information about each issue and probably some instructions on how to fix it.</p><p>Also, when in doubt, try rebooting to make sure the new permissions have taken effect.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://gbergatto.github.io/tags/flutter/>Flutter</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=http://gbergatto.github.io/>GBergatto</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>